# ğŸœ HowTasty (å¥½åƒä¹ˆ) - å…¨é¢å¼€å‘è§„èŒƒä¸æŒ‡ä»¤é›†

æœ¬æ–‡æ¡£æ—¨åœ¨ä¸º **HowTasty** DApp æä¾›æ ¸å¿ƒåŠŸèƒ½æ¢³ç†ã€æ™ºèƒ½åˆçº¦å¼€å‘ Prompt ä»¥åŠå‰ç«¯äº¤äº’é€»è¾‘è§„èŒƒã€‚å®ƒæ˜¯è¿æ¥æ„¿æ™¯ã€ä»£ç å®ç°ä¸ç”¨æˆ·ä½“éªŒçš„æ¡¥æ¢ã€‚

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½æ¨¡å— (Core Modules)

### 1. å•†å®¶å‘ç°ä¸åœ°å›¾ä¸­å¿ƒ (Merchant Discovery)
- **æç®€å¡ç‰‡æµ**ï¼šæŒ‰â€œä¿¡èª‰å‡€åˆ† (Up-Down)â€æˆ–â€œæœ€æ–°å½•å…¥â€æ’åºã€‚
- **åœ°ç†æ ‡è¯†ç²¾å‡†åŒ–**ï¼šæ¯ä¸ªå•†å®¶å¼ºåˆ¶å…³è” `Location` å­—æ®µï¼Œçªå‡ºæ˜¾ç¤ºå•†åœˆ/è¡—é“ã€‚
- **åˆ†ç±»æ£€ç´¢**ï¼šæ”¯æŒæ­£é¤ã€å°åƒã€é¥®å“ç­‰åˆ†ç±»ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡ã€‚
- **ä»£å¸äº§å‡ºè¿½è¸ª**ï¼šé€æ˜å±•ç¤ºè¯¥å•†å®¶å·²ç´¯è®¡ä¸ºç¤¾åŒºè´¡çŒ®äº†å¤šå°‘ $TASTY å¥–åŠ±ã€‚

### 2. ç¡¬æ ¸ç‚¹è¯„äº¤äº’ (Hardcore Review UI)
- **è¯æ®é“¾ä¸Šé“¾**ï¼šé›†æˆ IPFSï¼Œå¼•å¯¼ç”¨æˆ·ä¸Šä¼ æ”¶é“¶å°ç¥¨æˆ–èœå“å®æ‹ï¼Œä½œä¸ºâ€œç¡¬æ ¸ç‚¹è¯„â€çš„ç‰©ç†è¯æ®ã€‚
- **æƒé‡å®æ—¶é¢„è§ˆ**ï¼šåœ¨æŠ•ç¥¨å‰ï¼Œæ ¹æ®ç”¨æˆ·å½“å‰çš„å£°æœ› ($REP) åŠ¨æ€è®¡ç®—å¹¶æ˜¾ç¤ºæ­¤ç¥¨çš„é¢„è®¡å½±å“åŠ›ã€‚
- **æµè§ˆå™¨ç›´è¿**ï¼šæ¯æ¡ç‚¹è¯„ä¸‹æ–¹å‡æœ‰ Monad Explorer é“¾æ¥ï¼Œç¡®ä¿å­˜è¯å¯æŸ¥ã€‚

### 3. ä¸ªäººâ€œé£Ÿå®¢â€ä¸­å¿ƒ (User Profile & Reputation)
- **å£°æœ›çœ‹æ¿**ï¼šå¯è§†åŒ–å±•ç¤º $REP è¿›åº¦æ¡å’Œ $TASTY ä½™é¢ã€‚
- **æˆå°±ç³»ç»Ÿ**ï¼š
  - `åŸå¸‚æ‹“è’è€…`ï¼šå¥–åŠ±é¦–ä½å½•å…¥å†·é—¨å¥½åº—çš„ç”¨æˆ·ã€‚
  - `çœŸç›¸å®ˆæŠ¤è€…`ï¼šå¥–åŠ±å¤šæ¬¡å‚ä¸ä¸¾æŠ¥å¹¶çº åæˆåŠŸçš„ç”¨æˆ·ã€‚
- **åˆ†çº¢é¢æ¿**ï¼šä½œä¸ºå•†å®¶å½•å…¥è€… (Curator)ï¼Œå¯ä¸€é”®æå–è¯¥å•†å®¶äº§ç”Ÿçš„ 5% æ°¸ç»­çº¢åˆ©ã€‚

### 4. å•†å®¶çº¢é»‘æ¦œ (The Rankings)
- **å¥½åƒçº¢æ¦œ**ï¼šç”±é«˜å£°æœ›ç”¨æˆ·é€šè¿‡çœŸå®è¯æ®å †å å‡ºçš„å¯ä¿¡æ¦œå•ã€‚
- **éš¾åƒé»‘æ¦œ**ï¼šè¯æ®ç¡®å‡¿çš„ä½åˆ†å•†å®¶å°†è¢«æ°¸è¿œé’‰åœ¨é“¾ä¸Šï¼Œæ— æ³•é€šè¿‡å…¬å…³åˆ è¯„ã€‚

---

## ğŸ“ æ™ºèƒ½åˆçº¦å¼€å‘æŒ‡ä»¤ (Contract Prompt)

### 1. åŸºç¡€è®¾å®š
- **åˆçº¦åç§°**: `HowTasty`
- **ç¼–è¯‘å™¨ç‰ˆæœ¬**: `pragma solidity ^0.8.20;`
- **ç»§æ‰¿æ ‡å‡†**: OpenZeppelin `ERC20` ($TASTY), `Ownable`, `ReentrancyGuard`ã€‚

### 2. æ ¸å¿ƒæ•°æ®ç»“æ„ (Data Structures)
```solidity
struct Review {
    address voter;
    bool isUpvote;
    string comment;
    string imageHash; // IPFS å“ˆå¸Œ
    uint256 weight;   // æŠ•ç¥¨æ—¶çš„å®é™…æƒé‡
    uint256 timestamp;
}

struct Merchant {
    uint256 id;
    string name;
    string location;
    string description;
    string category;
    uint256 upVotes;
    uint256 downVotes;
    uint256 totalTastyRewarded; // ç´¯è®¡å¥–åŠ±äº§å‡º
    address creator;            // å½•å…¥è€… (Curator)
    uint256 createdAt;
    bool exists;
}
```

### 3. å…³é”®å‡½æ•°é€»è¾‘ (Detailed Logic)

#### A. å•†å®¶å½•å…¥ (addMerchant)
- **è¾“å…¥**: `name`, `location`, `description`, `category`ã€‚
- **å”¯ä¸€æ€§æ ¡éªŒ**: 
  - è®¡ç®— `keccak256(abi.encodePacked(name, location))`ã€‚
  - å¦‚æœè¯¥å“ˆå¸Œå·²å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ `MerchantAlreadyExists`ã€‚
- **è®°å½•**: å­˜å‚¨å•†å®¶ä¿¡æ¯ï¼Œå¹¶å°†è°ƒç”¨è€…æ ‡è®°ä¸º `creator` (å‘ç°è€…)ã€‚

#### B. ç¡¬æ ¸ç‚¹è¯„ (vote)
- **è¾“å…¥**: `merchantId`, `isUpvote`, `comment`, `imageHash`ã€‚
- **è¯¦ç»†æ­¥éª¤**:
  1. **é˜²é‡å¤**: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å¯¹è¯¥å•†å®¶æŠ•è¿‡ç¥¨ã€‚
  2. **è®¡ç®—åŸºç¡€æƒé‡**: å¦‚æœ `imageHash` (IPFS è¯æ®) ä¸ä¸ºç©ºï¼Œæƒé‡ = 5ï¼›å¦åˆ™æƒé‡ = 1ã€‚
  3. **å£°æœ›åŠ æˆ**: æœ€ç»ˆæƒé‡ = åŸºç¡€æƒé‡ * (1 + ç”¨æˆ·å£°æœ› / 100)ã€‚
  4. **æ›´æ–°å•†å®¶ç¥¨æ•°**: æ ¹æ® `isUpvote` å¢åŠ å•†å®¶çš„ `upVotes` æˆ– `downVotes`ï¼ˆæŒ‰æƒé‡è®¡ç®—ï¼‰ã€‚
  5. **ä»£å¸å¥–åŠ±**: 
     - é“¸é€  (Mint) $TASTY ç»™ç‚¹è¯„è€…ã€‚å¥–åŠ±é‡‘é¢ = æœ€ç»ˆæƒé‡ * 10^18ã€‚
  6. **å‘ç°è€…åˆ†çº¢**: é¢å¤–é“¸é€ å¥–åŠ±é‡‘é¢çš„ 5% ç»™è¯¥å•†å®¶çš„ `creator`ã€‚
  7. **å£°æœ›å¢é•¿**: ç‚¹è¯„æˆåŠŸåï¼Œç‚¹è¯„è€… `reputation` +1ã€‚

#### C. æŸ¥è¯¢åŠŸèƒ½ (Queries)
- `getAllMerchants()`: è¿”å›æ‰€æœ‰å•†å®¶ç»“æ„ä½“æ•°ç»„ã€‚
- `getMerchantReviews(uint256 id)`: è¿”å›ç‰¹å®šå•†å®¶çš„å®Œæ•´ç‚¹è¯„æµã€‚
- `getUserReputation(address user)`: æŸ¥è¯¢ç‰¹å®šåœ°å€çš„å£°æœ›å€¼ã€‚

### 4. å…³é”®é€»è¾‘è¦æ±‚ (General Requirements)
- **Events**: `MerchantAdded`, `Voted`, `ReputationUpdated`, `RewardsWithdrawn`ã€‚
- **Errors**: `MerchantAlreadyExists`, `MerchantNotFound`, `AlreadyVoted`, `InvalidImageHash`ã€‚

---

## ğŸ¨ å‰ç«¯äº¤äº’è§„èŒƒ (Frontend Specs)

### 1. çŠ¶æ€ç®¡ç†
- **å®æ—¶åŒæ­¥**ï¼šç›‘å¬ `Voted` äº‹ä»¶ï¼Œè‡ªåŠ¨åˆ·æ–°å•†å®¶å¡ç‰‡çš„ç¥¨æ•°ç»Ÿè®¡ã€‚
- **åŠ è½½æ€ä¼˜åŒ–**ï¼šé’ˆå¯¹ Monad æé€Ÿç¡®è®¤çš„ç‰¹ç‚¹ï¼Œè®¾è®¡ä¸æ»‘çš„äº¤æ˜“æˆåŠŸ Toast (å·²å®ç°)ã€‚

### 2. äº¤äº’ç»†èŠ‚
- **å›¾ç‰‡é¢„è§ˆ**ï¼šç‚¹å‡» `imageHash` å¼¹çª—æ˜¾ç¤º IPFS å­˜å‚¨çš„è¯æ®ç…§ç‰‡ã€‚
- **å½•å…¥å¼•å¯¼**ï¼šè¾“å…¥åº—åæ—¶ï¼Œå‰ç«¯å°è¯•è”æƒ³æœç´¢å·²å½•å…¥çš„ç›¸ä¼¼å•†å®¶ï¼Œé˜²æ­¢è¯¯æ“ä½œé‡å¤å½•å…¥ã€‚

### 3. å®‰å…¨ä¸åˆè§„
- **é’±åŒ…è¿æ¥**ï¼šé›†æˆ RainbowKit/Wagmiã€‚
- **ç½‘ç»œæ£€æŸ¥**ï¼šå¼ºåˆ¶è¦æ±‚ç”¨æˆ·åˆ‡æ¢è‡³ Monad Testnet (Chain ID: 10143)ã€‚

---

## ğŸ›  æŠ€æœ¯æ ˆ (Tech Stack)
- **Smart Contract**: Solidity, Hardhat, OpenZeppelin.
- **Frontend**: Next.js (App Router), Tailwind CSS, Lucide Icons.
- **Web3 Hook**: Wagmi v2, Viem, TanStack Query.
- **Storage**: IPFS (for Review Proofs).
- **Chain**: Monad Testnet.
